import { Text } from "@mantine/core";
import * as Flags from "mantine-flagpack";
import type { LocationT } from "./types";

const FlagComponents = {
  AD: Flags.ADFlag,
  AE: Flags.AEFlag,
  AF: Flags.AFFlag,
  AG: Flags.AGFlag,
  AI: Flags.AIFlag,
  AL: Flags.ALFlag,
  AM: Flags.AMFlag,
  AO: Flags.AOFlag,
  AQ: Flags.AQFlag,
  AR: Flags.ARFlag,
  AS: Flags.ASFlag,
  AT: Flags.ATFlag,
  AU: Flags.AUFlag,
  AW: Flags.AWFlag,
  AX: Flags.AXFlag,
  AZ: Flags.AZFlag,
  BA: Flags.BAFlag,
  BB: Flags.BBFlag,
  BD: Flags.BDFlag,
  BE: Flags.BEFlag,
  BF: Flags.BFFlag,
  BG: Flags.BGFlag,
  BH: Flags.BHFlag,
  BI: Flags.BIFlag,
  BJ: Flags.BJFlag,
  BL: Flags.BLFlag,
  BM: Flags.BMFlag,
  BN: Flags.BNFlag,
  BO: Flags.BOFlag,
  BR: Flags.BRFlag,
  BS: Flags.BSFlag,
  BT: Flags.BTFlag,
  BV: Flags.BVFlag,
  BW: Flags.BWFlag,
  BY: Flags.BYFlag,
  BZ: Flags.BZFlag,
  CA: Flags.CAFlag,
  CC: Flags.CCFlag,
  CD: Flags.CDFlag,
  CF: Flags.CFFlag,
  CG: Flags.CGFlag,
  CH: Flags.CHFlag,
  CI: Flags.CIFlag,
  CK: Flags.CKFlag,
  CL: Flags.CLFlag,
  CM: Flags.CMFlag,
  CN: Flags.CNFlag,
  CO: Flags.COFlag,
  CR: Flags.CRFlag,
  CU: Flags.CUFlag,
  CV: Flags.CVFlag,
  CW: Flags.CWFlag,
  CX: Flags.CXFlag,
  CY: Flags.CYFlag,
  CZ: Flags.CZFlag,
  DE: Flags.DEFlag,
  DJ: Flags.DJFlag,
  DK: Flags.DKFlag,
  DM: Flags.DMFlag,
  DO: Flags.DOFlag,
  DZ: Flags.DZFlag,
  EC: Flags.ECFlag,
  EE: Flags.EEFlag,
  EG: Flags.EGFlag,
  EH: Flags.EHFlag,
  ER: Flags.ERFlag,
  ES: Flags.ESFlag,
  ET: Flags.ETFlag,
  FI: Flags.FIFlag,
  FJ: Flags.FJFlag,
  FK: Flags.FKFlag,
  FM: Flags.FMFlag,
  FO: Flags.FOFlag,
  FR: Flags.FRFlag,
  GA: Flags.GAFlag,
  GB: Flags.GBFlag,
  GD: Flags.GDFlag,
  GE: Flags.GEFlag,
  GF: Flags.GFFlag,
  GG: Flags.GGFlag,
  GH: Flags.GHFlag,
  GI: Flags.GIFlag,
  GL: Flags.GLFlag,
  GM: Flags.GMFlag,
  GN: Flags.GNFlag,
  GP: Flags.GPFlag,
  GQ: Flags.GQFlag,
  GR: Flags.GRFlag,
  GS: Flags.GSFlag,
  GT: Flags.GTFlag,
  GU: Flags.GUFlag,
  GW: Flags.GWFlag,
  GY: Flags.GYFlag,
  HK: Flags.HKFlag,
  HM: Flags.HMFlag,
  HN: Flags.HNFlag,
  HR: Flags.HRFlag,
  HT: Flags.HTFlag,
  HU: Flags.HUFlag,
  ID: Flags.IDFlag,
  IE: Flags.IEFlag,
  IL: Flags.ILFlag,
  IM: Flags.IMFlag,
  IN: Flags.INFlag,
  IO: Flags.IOFlag,
  IQ: Flags.IQFlag,
  IR: Flags.IRFlag,
  IS: Flags.ISFlag,
  IT: Flags.ITFlag,
  JE: Flags.JEFlag,
  JM: Flags.JMFlag,
  JO: Flags.JOFlag,
  JP: Flags.JPFlag,
  KG: Flags.KGFlag,
  KH: Flags.KHFlag,
  KI: Flags.KIFlag,
  KM: Flags.KMFlag,
  KN: Flags.KNFlag,
  KP: Flags.KPFlag,
  KR: Flags.KRFlag,
  KW: Flags.KWFlag,
  KY: Flags.KYFlag,
  KZ: Flags.KZFlag,
  LA: Flags.LAFlag,
  LB: Flags.LBFlag,
  LC: Flags.LCFlag,
  LI: Flags.LIFlag,
  LK: Flags.LKFlag,
  LR: Flags.LRFlag,
  LS: Flags.LSFlag,
  LT: Flags.LTFlag,
  LU: Flags.LUFlag,
  LV: Flags.LVFlag,
  LY: Flags.LYFlag,
  MA: Flags.MAFlag,
  MC: Flags.MCFlag,
  MD: Flags.MDFlag,
  ME: Flags.MEFlag,
  MF: Flags.MFFlag,
  MG: Flags.MGFlag,
  MH: Flags.MHFlag,
  MK: Flags.MKFlag,
  ML: Flags.MLFlag,
  MM: Flags.MMFlag,
  MN: Flags.MNFlag,
  MO: Flags.MOFlag,
  MP: Flags.MPFlag,
  MQ: Flags.MQFlag,
  MR: Flags.MRFlag,
  MS: Flags.MSFlag,
  MU: Flags.MUFlag,
  MV: Flags.MVFlag,
  MW: Flags.MWFlag,
  MX: Flags.MXFlag,
  MY: Flags.MYFlag,
  MZ: Flags.MZFlag,
  NA: Flags.NAFlag,
  NC: Flags.NCFlag,
  NE: Flags.NEFlag,
  NF: Flags.NFFlag,
  NG: Flags.NGFlag,
  NI: Flags.NIFlag,
  NL: Flags.NLFlag,
  NO: Flags.NOFlag,
  NP: Flags.NPFlag,
  NR: Flags.NRFlag,
  NU: Flags.NUFlag,
  NZ: Flags.NZFlag,
  OM: Flags.OMFlag,
  PA: Flags.PAFlag,
  PE: Flags.PEFlag,
  PF: Flags.PFFlag,
  PG: Flags.PGFlag,
  PH: Flags.PHFlag,
  PK: Flags.PKFlag,
  PL: Flags.PLFlag,
  PM: Flags.PMFlag,
  PN: Flags.PNFlag,
  PR: Flags.PRFlag,
  PS: Flags.PSFlag,
  PT: Flags.PTFlag,
  PW: Flags.PWFlag,
  PY: Flags.PYFlag,
  QA: Flags.QAFlag,
  RE: Flags.REFlag,
  RO: Flags.ROFlag,
  RS: Flags.RSFlag,
  RU: Flags.RUFlag,
  RW: Flags.RWFlag,
  SA: Flags.SAFlag,
  SB: Flags.SBFlag,
  SC: Flags.SCFlag,
  SD: Flags.SDFlag,
  SE: Flags.SEFlag,
  SG: Flags.SGFlag,
  SH: Flags.SHFlag,
  SI: Flags.SIFlag,
  SJ: Flags.SJFlag,
  SK: Flags.SKFlag,
  SL: Flags.SLFlag,
  SM: Flags.SMFlag,
  SN: Flags.SNFlag,
  SO: Flags.SOFlag,
  SR: Flags.SRFlag,
  SS: Flags.SSFlag,
  ST: Flags.STFlag,
  SV: Flags.SVFlag,
  SX: Flags.SXFlag,
  SY: Flags.SYFlag,
  SZ: Flags.SZFlag,
  TC: Flags.TCFlag,
  TD: Flags.TDFlag,
  TF: Flags.TFFlag,
  TG: Flags.TGFlag,
  TH: Flags.THFlag,
  TJ: Flags.TJFlag,
  TK: Flags.TKFlag,
  TL: Flags.TLFlag,
  TM: Flags.TMFlag,
  TN: Flags.TNFlag,
  TO: Flags.TOFlag,
  TR: Flags.TRFlag,
  TT: Flags.TTFlag,
  TV: Flags.TVFlag,
  TW: Flags.TWFlag,
  TZ: Flags.TZFlag,
  UA: Flags.UAFlag,
  UG: Flags.UGFlag,
  UM: Flags.UMFlag,
  US: Flags.USFlag,
  UY: Flags.UYFlag,
  UZ: Flags.UZFlag,
  VA: Flags.VAFlag,
  VC: Flags.VCFlag,
  VE: Flags.VEFlag,
  VG: Flags.VGFlag,
  VI: Flags.VIFlag,
  VN: Flags.VNFlag,
  VU: Flags.VUFlag,
  WF: Flags.WFFlag,
  WS: Flags.WSFlag,
  XK: Flags.XKFlag,
  YE: Flags.YEFlag,
  ZA: Flags.ZAFlag,
  ZM: Flags.ZMFlag,
  ZW: Flags.ZWFlag,
};

type FlagCode = keyof typeof FlagComponents;

export function DisplayLocation({ location }: { location: LocationT }) {
  if (!location.country_code) return null;

  const FlagComponent =
    location.country_code in FlagComponents
      ? FlagComponents[location.country_code as FlagCode]
      : null;

  return (
    <Text size="sm" fw={700}>
      {FlagComponent && <FlagComponent w={20} radius="xs" />}{" "}
      {location.city || <i>no city</i>},{" "}
      {location.country_name || <i>no country</i>}
    </Text>
  );
}
